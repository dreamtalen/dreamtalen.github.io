<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Add &quot;Read more&quot; to Phase Theme | Dmtalen Ding&#39;s Blog</title>
  <meta name="author" content="Dmtalen Ding">

  
  <meta name="description" content="hexo blog phase landscape">
  
  

  <link rel="alternate" href="/atom.xml" title="Dmtalen Ding&#39;s Blog" type="application/atom+xml">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8/jquery.min.js"></script>
  
</head>

<body>
  <a href="https://github.com/dreamtalen"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://camo.githubusercontent.com/52760788cde945287fbb584134c4cbc2bc36f904/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f77686974655f6666666666662e706e67" alt="Fork me on GitHub" data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_right_white_ffffff.png"></a>
  
  <header id="header" class="inner"><head>
<p id="blogHead">Dmtalen Ding.s Blog</p>
<p id="subhead">Right people. Right things.</p>
<style type="text/css">
@font-face {
	font-family: rain;
	src:url(http://dreamtalen-blog.qiniudn.com/FallingRain.ttf);
}

#blogHead{
	font-family: rain;
	font-size: 2.8em;
	color: #F5F5F5;
	text-shadow:0 0 10px #fff;
}
#subhead{
	font-family: rain;
	font-size: 1.3em;
	color: #C0C0C0;
}
</style>
</head>
<nav>
  <ul>
    
      <li><a href="/">Home</a>
      <style type="text/css">
      @font-face {
	       font-family: pacifico;
	       src:url(http://dreamtalen-blog.qiniudn.com/fontPacifico.ttf);
      }
      #header nav {
  	     font-family: pacifico;
  	     font-size: 1.6em;
  	     margin-top: -13px;
  	  }
  	  article header {
         font-size: 1.2em;
      }
      .article-more-link {
        display: inline-block
      line-height: 1em
      padding: 6px 15px
    border-radius: 15px
    background: color-background
    color: color-blue
    text-shadow: 0 1px #fff
    text-decoration: none
    &:hover
    background: color-link
    color: #fff
    text-decoration: none
    text-shadow: 0 1px darken(color-link, 20%
      }
      </style>
      </li>
    
      <li><a href="/archives">Archives</a>
      <style type="text/css">
      @font-face {
	       font-family: pacifico;
	       src:url(http://dreamtalen-blog.qiniudn.com/fontPacifico.ttf);
      }
      #header nav {
  	     font-family: pacifico;
  	     font-size: 1.6em;
  	     margin-top: -13px;
  	  }
  	  article header {
         font-size: 1.2em;
      }
      .article-more-link {
        display: inline-block
      line-height: 1em
      padding: 6px 15px
    border-radius: 15px
    background: color-background
    color: color-blue
    text-shadow: 0 1px #fff
    text-decoration: none
    &:hover
    background: color-link
    color: #fff
    text-decoration: none
    text-shadow: 0 1px darken(color-link, 20%
      }
      </style>
      </li>
    
      <li><a href="/about">About</a>
      <style type="text/css">
      @font-face {
	       font-family: pacifico;
	       src:url(http://dreamtalen-blog.qiniudn.com/fontPacifico.ttf);
      }
      #header nav {
  	     font-family: pacifico;
  	     font-size: 1.6em;
  	     margin-top: -13px;
  	  }
  	  article header {
         font-size: 1.2em;
      }
      .article-more-link {
        display: inline-block
      line-height: 1em
      padding: 6px 15px
    border-radius: 15px
    background: color-background
    color: color-blue
    text-shadow: 0 1px #fff
    text-decoration: none
    &:hover
    background: color-link
    color: #fff
    text-decoration: none
    text-shadow: 0 1px darken(color-link, 20%
      }
      </style>
      </li>
    
  </ul>
</nav>
</header>
  <div id="content" class="inner"><article class="post">
  
    <div class="gallery">
  <div class="photoset">
    
      <img src="">
    
  </div>
  <div class="control">
    <div class="prev"></div>
    <div class="next"></div>
  </div>
</div>
  
  <header>
    
  
    <h1 class="title">Add &quot;Read more&quot; to Phase Theme</h1>
  

    <time datetime="2014-05-07T07:29:59.000Z">
  <span class="day">7</span><span class="month">5月</span>
</time>
  </header>
  <div class="entry-content">
    
  <p>Phase主题在文章中使用<code>&lt;!--more--&gt;</code>添加索引后并不会在首页上生成”阅读全文”链接，于是参考了landscape主题中<code>\hexo\themes\landscape\layout\_partial\article.ejs</code>文件，为Phase主题添加”Read more”按钮：</p>
<p>打开<code>\hexo\themes\phase\layout\_partial\article.ejs</code>文件：</p>
<p>将</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&lt;% <span class="keyword">if</span> (item.excerpt && index){ <span class="variable">%&gt;</span></div><div class="line">  &lt;<span class="variable">%-</span> item.excerpt <span class="variable">%&gt;</span></div><div class="line">&lt;% } <span class="keyword">else</span> { <span class="variable">%&gt;</span></div><div class="line">  &lt;<span class="variable">%-</span> item.content <span class="variable">%&gt;</span></div><div class="line">&lt;% } <span class="variable">%&gt;</span></div></pre></td></tr></table></figure>

<p>替换为<br><a id="more"></a> </p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="vbscript">&lt;% <span class="keyword">if</span> (item.excerpt && index){ %&gt;</span></div><div class="line">  <span class="vbscript">&lt;%- item.excerpt %&gt;</span>      </div><div class="line">  <span class="tag">&lt;<span class="title">p</span> <span class="attribute">class</span>=<span class="value">"article-more-link"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="title">a</span> <span class="attribute">href</span>=<span class="value">"&lt;%- config.root %&gt;&lt;%- item.path %&gt;#more"</span>&gt;</span><span class="vbscript">&lt;%= <span class="comment">'read more' %&gt;</span></span><span class="tag">&lt;/<span class="title">a</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="title">p</span>&gt;</span></div><div class="line"><span class="vbscript">&lt;% } <span class="keyword">else</span> { %&gt;</span></div><div class="line">  <span class="vbscript">&lt;%- item.content %&gt;</span></div><div class="line"><span class="vbscript">&lt;% } %&gt;</span></div></pre></td></tr></table></figure>

<p>这样就实现了”Read more”功能，下面我们修改下css对按钮进行美化：</p>
<p>打开<code>hexo\themes\phase\source\css\_partial\article.styl</code>文件，在末尾添加：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">.article-more-link</div><div class="line">  display: inline-block</div><div class="line">  <span class="built_in">line</span>-height: <span class="number">1</span>em</div><div class="line">  padding: <span class="number">6</span>px <span class="number">15</span>px</div><div class="line">  border-radius: <span class="number">15</span>px</div><div class="line">  background: <span class="comment">#9d61cf</span></div><div class="line">  <span class="operator">a</span></div><div class="line">    color: <span class="comment">#ffffff		/* 修改文字颜色，因默认链接颜色与按钮背景颜色相同，故在此必须复写 */</span></div><div class="line">    &:hover</div><div class="line">      <span class="keyword">text</span>-shadow <span class="number">0</span> <span class="number">0</span> <span class="number">20</span>px <span class="comment">#ffffff</span></div></pre></td></tr></table></figure>



    
    <footer class="meta">
      
      
      
    </footer>
    
  </div>
  
  

	<div class="ds-thread" data-thread-key="2014/05/07/readmore/" data-title="Add &quot;Read more&quot; to Phase Theme" data-url="%= page.permalink %>"></div>
<script type="text/javascript">
var duoshuoQuery = {short_name:"dreamtalen"};
	(function() {
		var ds = document.createElement('script');
		ds.type = 'text/javascript';ds.async = true;
		ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
		ds.charset = 'UTF-8';
		(document.getElementsByTagName('head')[0] 
		 || document.getElementsByTagName('body')[0]).appendChild(ds);
	})();
	</script>



</article>
</div>
  <footer id="footer" class="inner"><div class="social alignright">
  
  
  
  
  <a class="rss" href="/atom.xml" title="RSS">RSS</a>
</div>
<p>
  
  &copy; 2015 Dmtalen Ding
  
</p>
<div class="clearfix"></div></footer>
  <script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>




<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
  $('.fancybox').fancybox();
})(jQuery);
</script>


<div id="phasebeam">
  <canvas></canvas>
  <canvas></canvas>
  <canvas></canvas>
</div>
<script src="/js/phasebeam.js"></script>
<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "//hm.baidu.com/hm.js?174d6e978d75d0d4be8977ad0abf7621";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>


</body>
</html>

